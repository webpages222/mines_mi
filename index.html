<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <title>MiMInes</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="inter">
<div class="Back">

</div>
    <input type="hidden" id="language"  value="russian"/>
    <img class="star1" src="Star.svg">
    <img class="star2" src="Star.svg">
    <div class="headerMines">
        <img src="MiMines.png">
    </div>
    <div class="selectorMines">
        <div class="dropdownMines">
            <div class="selector">
                <a id="minesSelector"></a>
            </div>
            <div class="dropdown">
                <button class="dropdown-button"></button>
                <div class="dropdown-content">
                    <a href="#">1</a>
                    <a href="#">2</a>
                    <a href="#">3</a>
                    <a href="#">4</a>
                    <a href="#">5</a>
                    <a href="#">6</a>
                    <a href="#">7</a>
                    <a href="#">8</a>
                    <a href="#">9</a>
                    <a href="#">10</a>
                    <a href="#">11</a>
                    <a href="#">12</a>
                    <a href="#">13</a>
                    <a href="#">14</a>
                    <a href="#">15</a>
                    <a href="#">16</a>
                    <a href="#">17</a>
                    <a href="#">18</a>
                    <a href="#">19</a>
                    <a href="#">20</a>
                </div>
            </div>
        </div>
    </div>
    <div id="main">
        <canvas id="canvas">
        </canvas>
    </div>
    <div class="mainPanel">
        <div class="rowButton">
            <div class="replayButton" onclick=" createGrid(); drawGrid()">
                <img src="Replay.svg">
            </div>
            <div class="getSignal" onclick="handleScenario(selectIndex)">
                <img src="Play.svg">
                <a id="get-signal-text"></a>
            </div>
        </div>
        <div class="rowButton">
            <div class="vineet" id="vineet">
                <img src="tg.svg" alt="Telegram Icon">
                vineet_mines_bot
            </div>
        </div>
    </div>



    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        Telegram.WebApp.expand(); // Открытие веб-приложения в полный экран
        window.Telegram.WebApp.allow_vertical_swipe = false;
        window.Telegram.WebApp.disableVerticalSwipes();

        // Получаем язык из скрытого поля
        var userLanguage = document.getElementById("language").value;

        // Объект с текстами для каждого языка
        const texts = {
            english: {
                getSignal: "GET SIGNAL",
                minesSelector: "Mines: "
            },
            russian: {
                getSignal: "GET SIGNAL",
                minesSelector: "Mines: "
            }
        };

        //Функция для установки языка
        function setLanguage(userLanguage) {
            const langTexts = userLanguage === 'russian' ? texts.russian : texts.english;
            document.getElementById("get-signal-text").innerHTML = langTexts.getSignal;
            document.getElementById("minesSelector").innerHTML = langTexts.minesSelector +"1";
        }
        // Вызываем функцию установки языка при загрузке страницы
        setLanguage(userLanguage);

        // Находим все ссылки в выпадающем списке
        const dropdownItems = document.querySelectorAll('.dropdown-content a');

        // Находим элемент с id="minesSelector"
        const minesSelector = document.getElementById('minesSelector');

        // Находим выпадающий список и кнопку
        const dropdownContent = document.querySelector('.dropdown-content');
        const dropdownButton = document.querySelector('.dropdown-button');

        // Добавляем обработчик события для кнопки
        dropdownButton.addEventListener('click', function() {
            // Переключаем отображение выпадающего списка
            dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
        });

        // Добавляем обработчик события для каждой ссылки
        dropdownItems.forEach(item => {
            item.addEventListener('click', function(event) {
                event.preventDefault(); // Отключаем переход по ссылке
                selectIndex = Number(this.textContent);
                const langTexts =
                    userLanguage === 'russian' || userLanguage === 'uzbek' || userLanguage === 'azerbaijani'
                        ? texts.russian
                        : texts.english;
                minesSelector.textContent = langTexts.minesSelector + `${this.textContent}`;


                // Скрываем выпадающий список после выбора
                dropdownContent.style.display = 'none';
            });
        });


    </script>
    <script src="script.js"></script>
    <script src="CanvasMiMines.js"></script>
</body>
</html>